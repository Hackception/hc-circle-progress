<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html">
<link rel="import" href="./svg-util-behavior.html">

<script>
  /* global hc */
  // Ensure our namespace is available
  window.hc = window.hc || {};

  const SvgProgressBehaviorImpl = {
    properties: {
      /**
       * Value of circular progress bar.
       */
      value: {
        type: Number,
        value: 0
      },

      /**
       * Maximum of value.
       */
      max: {
        type: Number,
        value: 100
      },

      /**
       * Stroke width of circle.
       */
      strokeWidth: {
        type: Number,
        value: 4
      },

      _dasharray: {
        type: Number
      },

      _dashoffset: {
        type: Number,
        computed: '_computeDashOffset(value, max, _dasharray)'
      }
    },

    // listeners: {
    //   "iron-resize": "_onIronResize"
    // },




    // Calculate the dash-array
    _computeDashArray(el) {
      this._dasharray = this.getTotalLength(el);
    },

    // Calculate the dash-offset
    _computeDashOffset(value = this.value, max = this.max, dasharray = this._dasharray) {
      return (1 - value / max) * dasharray;
    },
    //
    // _computeRadius: function(cx, cy, strokeWidth) {
    //   return cx && cy ? Math.max(0, Math.min(cx, cy) - strokeWidth / 2) : 0;
    // },
    //
    // _computeTransform: function(angle, cx, cy) {
    //   return cx && cy ? 'rotate(' + angle + ', ' + cx + ', ' + cy + ')' : '';
    // },

    // _onIronResize: function(callback) {
    //   if (this.offsetWidth && this.offsetHeight) {
    //     this._computeDashArray(this);
    //   }
    // }
  };

  hc.SvgProgressBehavior = [Polymer.IronResizableBehavior, hc.SvgUtilBehavior, SvgProgressBehaviorImpl];
</script>
